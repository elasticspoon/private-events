<!-- Demo -->
<div class="px-5 py-16 min-h-[20rem] flex items-center justify-center">
  <div x-data="carousel" class="flex w-full flex-col">
    <div  class="flex space-x-6" tabindex="0" role="region" aria-labelledby="carousel-label">
      <h2 id="carousel-label" class="sr-only" hidden="">Carousel</h2>
      <button x-on:click="pageLeft" class="text-6xl">
        <span aria-hidden="true">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg>
        </span>
        <span class="sr-only">Skip to previous slide</span>
      </button>
      <span id="carousel-content-label" class="sr-only" hidden="">Carousel</span>
      <ul x-ref="slider" tabindex="0" role="listbox" aria-labelledby="carousel-content-label" class="flex w-full snap-x snap-mandatory overflow-x-scroll">
        <li class="flex w-1/3 shrink-0 snap-start flex-col items-center justify-center p-2" role="option">
          <img class="mt-2 w-full" src="https://picsum.photos/400/200?random=1" alt="placeholder image">
          <button x-bind="focusableWhenVisible" class="px-4 py-2 text-sm">Do Something</button>
        </li>
        <li class="flex w-1/3 shrink-0 snap-start flex-col items-center justify-center p-2" role="option">
          <img class="mt-2 w-full" src="https://picsum.photos/400/200?random=2" alt="placeholder image">
          <button x-bind="focusableWhenVisible" class="px-4 py-2 text-sm">Do Something</button>
        </li>
        <li class="flex w-1/3 shrink-0 snap-start flex-col items-center justify-center p-2" role="option">
          <img class="mt-2 w-full" src="https://picsum.photos/400/200?random=3" alt="placeholder image">
          <button x-bind="focusableWhenVisible" class="px-4 py-2 text-sm">Do Something</button>
        </li>
        <li class="flex w-1/3 shrink-0 snap-start flex-col items-center justify-center p-2" role="option">
          <img class="mt-2 w-full" src="https://picsum.photos/400/200?random=4" alt="placeholder image">
          <button x-bind="focusableWhenVisible" class="px-4 py-2 text-sm" tabindex="-1">Do Something</button>
        </li>
        <li class="flex w-1/3 shrink-0 snap-start flex-col items-center justify-center p-2" role="option">
          <img class="mt-2 w-full" src="https://picsum.photos/400/200?random=5" alt="placeholder image">
          <button x-bind="focusableWhenVisible" class="px-4 py-2 text-sm" tabindex="-1">Do Something</button>
        </li>
        <li class="flex w-1/3 shrink-0 snap-start flex-col items-center justify-center p-2" role="option">
          <img class="mt-2 w-full" src="https://picsum.photos/400/200?random=6" alt="placeholder image">
          <button x-bind="focusableWhenVisible" class="px-4 py-2 text-sm" tabindex="-1">Do Something</button>
        </li>
      </ul>
      <button x-on:click="pageRight" class="text-6xl">
        <span aria-hidden="true">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path></svg>
        </span>
        <span class="sr-only">Skip to next slide</span>
      </button>
    </div>
  </div>
</div>
<script>
  document.addEventListener('alpine:init', () => {
    Alpine.data('carousel', () => ({
    numCarouselElements: 3,
    pageRight() { this.to((current, offset) => current + (offset * this.numCarouselElements)) },
    pageLeft() { this.to((current, offset) => current - (offset * this.numCarouselElements)) },
    to(strategy) {
        let slider = this.$refs.slider
        let current = slider.scrollLeft
        let offset = slider.firstElementChild.getBoundingClientRect().width
        slider.scrollTo({ left: strategy(current, offset), behavior: 'smooth' })
    },
    focusableWhenVisible: {
        'x-intersect:enter'() { this.$el.removeAttribute('tabindex') }, 'x-intersect:leave'() { this.$el.setAttribute('tabindex', '-1') }, }
      }))

  })
</script>
